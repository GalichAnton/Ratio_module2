const A=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const P of i.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&c(P)}).observe(document,{childList:!0,subtree:!0});function t(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(l){if(l.ep)return;l.ep=!0;const i=t(l);fetch(l.href,i)}};A();const a={size:5,colors:["#c3f3c7","#a9e8b0","#9edba4","#76c47e","#71bd79","#67e174","#61ad69","#499e51","#418c48","#34783a"]},r={canPressDown:!0,canPressUp:!0,canPressLeft:!0,canPressRight:!0},o={interval:0,milliSeconds:0,seconds:0,minutes:0},$=e=>{switch(e){case 2:return a.colors[0];case 4:return a.colors[1];case 8:return a.colors[2];case 16:return a.colors[3];case 32:return a.colors[4];case 64:return a.colors[5];case 256:return a.colors[6];case 512:return a.colors[7];case 1024:return a.colors[8];case 2048:return a.colors[9];default:return}},I=(e,n)=>{for(let t=0;t<n*n;t++){const c=document.createElement("div");c.classList.add("game__cell-wrapper"),e.append(c)}},z=e=>{const n=document.createElement("div");return n.classList.add("game__cell"),n.style.backgroundColor=$(e),n.textContent=String(e),n},G=()=>Math.random()>.1?2:4,L=document.querySelector(".game__table"),b=document.querySelector(".game__end"),_=document.querySelector(".btn__start"),O=document.querySelector(".game__again"),q=document.querySelector(".game__win"),j=document.querySelector(".game__win-button"),x=document.querySelector(".game__win-input"),X=document.querySelector(".result__table"),v=document.querySelector("#minutes"),m=document.querySelector("#seconds"),w=document.querySelector("#milliseconds"),E=()=>{for(let e=0;e<a.size;e++)for(let n=0;n<a.size;n++){const t=document.querySelector(`#x${e}y${n}`);t&&t.remove()}o.seconds=0,m.textContent="0"+o.seconds,o.minutes=0,v.textContent="0"+o.minutes,o.milliSeconds=0,w.textContent="0"+o.milliSeconds},Y=()=>{X.insertAdjacentHTML("beforeend",`<li class="result__item">
          <span class="result__name">${x.value}</span>|
          <span class="result__score">${Math.ceil(2048/(o.minutes*60+o.seconds))}</span>
          </li>`),x.value="",q.classList.remove("game__win-active"),E(),_.style.display=""},N=()=>{clearInterval(o.interval),q.classList.add("game__win-active"),r.canPressDown=!1,r.canPressUp=!1,r.canPressRight=!1,r.canPressLeft=!1,j.addEventListener("click",Y)},d=(e,n,t)=>{const c=document.querySelector(`#x${t}y${n}`);c&&(c.remove(),e.textContent=String(+e.textContent*2),e.style.backgroundColor=$(+e.textContent)),e.textContent==="2048"&&N(),e.style.left=n*20+"%",e.style.top=t*20+"%",e.id=`x${t}y${n}`},H=e=>{let n,t,c=0;do if(n=Math.floor(Math.random()*a.size),t=Math.floor(Math.random()*a.size),++c===50)return;while(s[t][n]);return d(e,n,t),s[t][n]=Number(e.textContent),e},u=()=>{const e=H(z(G()));!e||L.append(e)},F=e=>{const n=new Array(e);for(let t=0;t<e;t++){n[t]=new Array(e);for(let c=0;c<e;c++)n[t][c]=0}return n},W=()=>{r.canPressLeft=!1;for(let e=0;e<a.size;e++)for(let n=1;n<a.size;n++)if(s[e][n]){let t=n;for(;t!=0;){if(s[e][t-1]===s[e][t]){s[e][t-1]=s[e][t-1]+s[e][t],s[e][t]=0;const c=document.querySelector(`#x${e}y${t}`);d(c,t-1,e),r.canPressLeft=!0}else if(s[e][t-1]===0){const c=document.querySelector(`#x${e}y${t}`);s[e][t-1]=s[e][t],s[e][t]=0,d(c,t-1,e),r.canPressLeft=!0}t--}}},k=()=>{new Promise(e=>{r.canPressDown&&(W(),e())}).then(()=>{u(),u()})},B=()=>{r.canPressUp=!1;for(let e=0;e<a.size;e++)for(let n=1;n<a.size;n++)if(s[n][e]){let t=n;for(;t!=0;){if(s[t-1][e]===s[t][e]){s[t-1][e]=s[t-1][e]+s[t][e],s[t][e]=0;const c=document.querySelector(`#x${t}y${e}`);d(c,e,t-1),r.canPressUp=!0}else if(s[t-1][e]===0){s[t-1][e]=s[t][e],s[t][e]=0;const c=document.querySelector(`#x${t}y${e}`);d(c,e,t-1),r.canPressUp=!0}t--}}},M=()=>{new Promise(e=>{r.canPressDown&&(B(),e())}).then(()=>{u(),u()})},K=()=>{r.canPressDown=!1;for(let e=4;e>=0;e--)for(let n=3;n>=0;n--)if(s[n][e]){let t=n;for(;t!=4;){if(s[t+1][e]===s[t][e]){s[t+1][e]=s[t+1][e]+s[t][e],s[t][e]=0;const c=document.querySelector(`#x${t}y${e}`);d(c,e,t+1),r.canPressDown=!0}else if(s[t+1][e]===0){const c=document.querySelector(`#x${t}y${e}`);s[t+1][e]=s[t][e],s[t][e]=0,d(c,e,t+1),r.canPressDown=!0}t++}}},R=()=>{new Promise(e=>{r.canPressDown&&(K(),e())}).then(()=>{u(),u()})},J=()=>{r.canPressRight=!1;for(let e=4;e>=0;e--)for(let n=3;n>=0;n--)if(s[e][n]){let t=n;for(;t!=4;){if(s[e][t+1]===s[e][t]){s[e][t+1]=s[e][t+1]+s[e][t],s[e][t]=0;const c=document.querySelector(`#x${e}y${t}`);d(c,t+1,e),r.canPressRight=!0}else if(s[e][t+1]===0){s[e][t+1]=s[e][t],s[e][t]=0;const c=document.querySelector(`#x${e}y${t}`);d(c,t+1,e),r.canPressRight=!0}t++}}},T=()=>{new Promise(e=>{r.canPressDown&&(J(),e())}).then(()=>{u(),u()})},Q=e=>{switch(e.key){case"ArrowLeft":e.preventDefault(),k();break;case"ArrowUp":e.preventDefault(),M();break;case"ArrowDown":e.preventDefault(),R();break;case"ArrowRight":e.preventDefault(),T();break}},V=()=>{E(),b.classList.remove("game__end-active"),U()},Z=()=>{console.log(o.interval),clearInterval(o.interval),b.classList.add("game__end-active"),O.addEventListener("click",V),r.canPressDown=!1,r.canPressUp=!1,r.canPressRight=!1,r.canPressLeft=!1},ee=()=>{!r.canPressLeft&&!r.canPressRight&&!r.canPressDown&&!r.canPressUp&&Z()},te=()=>{o.milliSeconds++,o.milliSeconds<9&&(w.textContent="0"+o.milliSeconds),o.milliSeconds>9&&(w.textContent=String(o.milliSeconds)),o.milliSeconds>99&&(o.seconds++,m.textContent="0"+o.seconds,o.milliSeconds=0,w.textContent="0"+o.milliSeconds),o.seconds<=9&&(m.textContent="0"+o.seconds),o.seconds>9&&(m.textContent=String(o.seconds)),o.seconds>59&&(o.minutes++,v.textContent="0"+o.minutes,o.seconds=0,m.textContent="0"+o.seconds),o.minutes>9&&(v.textContent=String(o.minutes))};let s=[];const U=()=>{s=F(a.size),u(),u(),document.addEventListener("keydown",e=>{Q(e),ee()}),o.interval=setInterval(te,10),_.style.display="none",r.canPressDown=!0,r.canPressUp=!0,r.canPressRight=!0,r.canPressLeft=!0},ne=250,se=40,oe=100;let g=0,S=0,y=0,h=0,p=0,f=0,D=0;const re=e=>{e.addEventListener("mousedown",function(n){g=new Date().getTime(),y=n.pageX,h=n.pageY,n.preventDefault()}),e.addEventListener("mouseup",function(n){n.preventDefault(),S=new Date().getTime()-g,p=n.pageX-y,f=n.pageY-h,C()}),e.addEventListener("touchstart",function(n){g=new Date().getTime(),y=n.touches[0].pageX,h=n.touches[0].pageY,n.preventDefault()}),e.addEventListener("touchend",function(n){S=new Date().getTime()-g,console.log(n),p=n.changedTouches[0].pageX-y,f=n.changedTouches[0].pageY-h,C(),n.preventDefault()})},C=()=>{D=Math.sqrt(Math.pow(p,2)+Math.pow(f,2)),S<=ne&&D>=se&&(Math.abs(f)<=oe&&Math.abs(p)>Math.abs(f)?p>0?T():k():f>0?R():M())};I(L,a.size);_.addEventListener("click",()=>{U()});re(L);
